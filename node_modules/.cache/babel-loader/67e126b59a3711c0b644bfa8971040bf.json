{"ast":null,"code":"import _objectSpread from \"C:/Users/Svenn\\xE6rn/Desktop/laddel-mvp/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _regeneratorRuntime from \"C:/Users/Svenn\\xE6rn/Desktop/laddel-mvp/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"C:/Users/Svenn\\xE6rn/Desktop/laddel-mvp/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\Svenn\\xE6rn\\\\Desktop\\\\laddel-mvp\\\\frontend\\\\src\\\\pages\\\\RegistrationPage.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport React, { useEffect } from 'react';\nimport { Link, Redirect, useHistory } from 'react-router-dom';\nimport { useForm } from \"react-hook-form\";\nimport { ErrorMessage } from '@hookform/error-message';\nimport { connect, useDispatch } from \"react-redux\";\nimport { authUser, registerUser } from \"../actions/userActions\";\nimport '../stylesheets/Form&Input&Select.css';\n/**\r\n * Side for registrering av brukere\r\n * Ved riktig registrering\r\n * @param props\r\n * @component\r\n * @author Magnus & Håkon\r\n */\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar RegistrationPage = function RegistrationPage(props) {\n  _s();\n\n  var _useForm = useForm(),\n      register = _useForm.register,\n      setError = _useForm.setError,\n      errors = _useForm.formState.errors,\n      handleSubmit = _useForm.handleSubmit,\n      getValues = _useForm.getValues;\n\n  var dispatch = useDispatch();\n  var history = useHistory();\n  useEffect(function () {\n    if (props.auth.registerError) {\n      if (props.auth.registerError.response) {\n        setError(\"email\", {\n          type: \"validate user\",\n          message: \"E-mail allerede i bruk\"\n        });\n      } else {\n        setError(\"email\", {\n          type: \"connection\",\n          message: \"Nettverksfeil. Sjekk din tilkobling og prøv på nytt\"\n        });\n      }\n    }\n  }, [props.auth.registerError]);\n  /**\r\n   * Metode for å ta data fra form og passere inn i postUser\r\n   * @param data - brukerdata fra form\r\n   * @return void\r\n   * @memberOf RegistrationPage\r\n   */\n\n  var onSubmit = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(data, e) {\n      var user;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              e.preventDefault();\n              user = {\n                name: data.firstName + data.lastName,\n                email: data.email,\n                pwd: data.password,\n                cellNum: 5,\n                pid: null,\n                isHost: false\n              };\n              _context.next = 4;\n              return dispatch(registerUser(user));\n\n            case 4:\n              if (!props.auth.registerError) {\n                history.push(\"/login\");\n              }\n\n            case 5:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function onSubmit(_x, _x2) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  if (props.auth.isAuthenticated) {\n    authUser();\n    return /*#__PURE__*/_jsxDEV(Redirect, {\n      to: \"/\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 16\n    }, _this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"formBox\",\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"Registrer deg\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 13\n    }, _this), /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"form\",\n      onSubmit: handleSubmit(onSubmit),\n      children: [/*#__PURE__*/_jsxDEV(\"input\", _objectSpread({\n        placeholder: \"Fornavn\"\n      }, register(\"firstName\", {\n        required: \"Fornavn påkrevd\",\n        pattern: {\n          value: /^[ÆØÅA-Z]+[æøåa-z]$/i,\n          message: \"Oppfyller ikke krav\"\n        }\n      })), void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 17\n      }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"formErrorField\",\n        children: /*#__PURE__*/_jsxDEV(ErrorMessage, {\n          errors: errors,\n          name: \"firstName\",\n          render: function render(_ref2) {\n            var message = _ref2.message;\n            return /*#__PURE__*/_jsxDEV(\"p\", {\n              children: message\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 75,\n              columnNumber: 93\n            }, _this);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 21\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 17\n      }, _this), /*#__PURE__*/_jsxDEV(\"input\", _objectSpread({\n        placeholder: \"Etternavn\"\n      }, register(\"lastName\", {\n        required: \"Etternavn påkrevd\",\n        pattern: {\n          value: /^[ÆØÅA-Zæøåa-z]+$/i,\n          message: \"Oppfyller ikke krav\"\n        }\n      })), void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 17\n      }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"formErrorField\",\n        children: /*#__PURE__*/_jsxDEV(ErrorMessage, {\n          errors: errors,\n          name: \"lastName\",\n          render: function render(_ref3) {\n            var message = _ref3.message;\n            return /*#__PURE__*/_jsxDEV(\"p\", {\n              children: message\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 79,\n              columnNumber: 92\n            }, _this);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 21\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 17\n      }, _this), /*#__PURE__*/_jsxDEV(\"input\", _objectSpread({\n        placeholder: \"E-mail\"\n      }, register(\"email\", {\n        required: \"E-postadresse påkrevd\",\n        pattern: {\n          value: /^[\\w-\\.]+@([\\w-]+\\.)+[\\w-]{2,4}$/i,\n          message: \"Oppfyller ikke krav\"\n        }\n      })), void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 17\n      }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"formErrorField\",\n        children: /*#__PURE__*/_jsxDEV(ErrorMessage, {\n          errors: errors,\n          name: \"email\",\n          render: function render(_ref4) {\n            var message = _ref4.message;\n            return /*#__PURE__*/_jsxDEV(\"p\", {\n              children: message\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 83,\n              columnNumber: 89\n            }, _this);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 21\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 17\n      }, _this), /*#__PURE__*/_jsxDEV(\"input\", _objectSpread({\n        type: \"password\",\n        placeholder: \"Passord\"\n      }, register(\"password\", {\n        required: \"Passord må være minst 8 tegn langt\",\n        minLength: {\n          value: 8,\n          message: \"Passord må være minst 8 tegn langt\"\n        }\n      })), void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 17\n      }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"formErrorField\",\n        children: /*#__PURE__*/_jsxDEV(ErrorMessage, {\n          errors: errors,\n          name: \"password\",\n          render: function render(_ref5) {\n            var message = _ref5.message;\n            return /*#__PURE__*/_jsxDEV(\"p\", {\n              children: message\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 87,\n              columnNumber: 92\n            }, _this);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 21\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 17\n      }, _this), /*#__PURE__*/_jsxDEV(\"input\", _objectSpread({\n        type: \"password\",\n        placeholder: \"Gjenta passord\"\n      }, register(\"cpassword\", {\n        required: \"Passordene må være like\",\n        validate: {\n          passEqual: function passEqual(val) {\n            return val === getValues().password || \"Passordene må være like\";\n          }\n        }\n      })), void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 17\n      }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"formErrorField\",\n        children: /*#__PURE__*/_jsxDEV(ErrorMessage, {\n          errors: errors,\n          name: \"cpassword\",\n          render: function render(_ref6) {\n            var message = _ref6.message;\n            return /*#__PURE__*/_jsxDEV(\"p\", {\n              children: message\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 91,\n              columnNumber: 93\n            }, _this);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 21\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 17\n      }, _this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"button\",\n        type: \"submit\",\n        children: \" REGISTRER \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 17\n      }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"column\",\n        children: /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/login\",\n          children: /*#__PURE__*/_jsxDEV(\"h5\", {\n            children: \"Allerede bruker? Logg inn her!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 25\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 21\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 17\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 13\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 70,\n    columnNumber: 9\n  }, _this);\n};\n\n_s(RegistrationPage, \"QHBIb+srz4qCifYppzv+JgzkDTo=\", false, function () {\n  return [useForm, useDispatch, useHistory];\n});\n\n_c = RegistrationPage;\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    auth: state.auth\n  };\n};\n\nexport default connect(mapStateToProps)(RegistrationPage);\n\nvar _c;\n\n$RefreshReg$(_c, \"RegistrationPage\");","map":{"version":3,"sources":["C:/Users/Svennærn/Desktop/laddel-mvp/frontend/src/pages/RegistrationPage.js"],"names":["React","useEffect","Link","Redirect","useHistory","useForm","ErrorMessage","connect","useDispatch","authUser","registerUser","RegistrationPage","props","register","setError","errors","formState","handleSubmit","getValues","dispatch","history","auth","registerError","response","type","message","onSubmit","data","e","preventDefault","user","name","firstName","lastName","email","pwd","password","cellNum","pid","isHost","push","isAuthenticated","required","pattern","value","minLength","validate","passEqual","val","mapStateToProps","state"],"mappings":"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","sourcesContent":["import React, {useEffect} from 'react';\r\nimport {Link, Redirect, useHistory} from 'react-router-dom';\r\nimport {useForm} from \"react-hook-form\";\r\nimport { ErrorMessage } from '@hookform/error-message';\r\nimport { connect, useDispatch } from \"react-redux\";\r\n\r\nimport {authUser, registerUser} from \"../actions/userActions\";\r\n\r\nimport '../stylesheets/Form&Input&Select.css'\r\n\r\n/**\r\n * Side for registrering av brukere\r\n * Ved riktig registrering\r\n * @param props\r\n * @component\r\n * @author Magnus & Håkon\r\n */\r\nconst RegistrationPage = (props) =>  {\r\n\r\n    const { register, setError, formState: { errors }, handleSubmit, getValues } = useForm();\r\n    const dispatch = useDispatch();\r\n    const history = useHistory();\r\n\r\n    useEffect(() => {\r\n        if (props.auth.registerError) {\r\n            if (props.auth.registerError.response) {\r\n                setError(\"email\", {\r\n                    type: \"validate user\",\r\n                    message: \"E-mail allerede i bruk\"\r\n                })\r\n            } else {\r\n                setError(\"email\", {\r\n                    type: \"connection\",\r\n                    message: \"Nettverksfeil. Sjekk din tilkobling og prøv på nytt\"\r\n                })\r\n            }\r\n        }\r\n    }, [props.auth.registerError]);\r\n\r\n    /**\r\n     * Metode for å ta data fra form og passere inn i postUser\r\n     * @param data - brukerdata fra form\r\n     * @return void\r\n     * @memberOf RegistrationPage\r\n     */\r\n\r\n    const onSubmit = async (data, e) => {\r\n        e.preventDefault();\r\n        const user = {\r\n            name: data.firstName + data.lastName,\r\n            email: data.email,\r\n            pwd: data.password,\r\n            cellNum: 5,\r\n            pid: null,\r\n            isHost: false\r\n        }\r\n        await dispatch(registerUser(user));\r\n        if (!props.auth.registerError) {\r\n            history.push(\"/login\");\r\n        }\r\n\r\n    }\r\n\r\n    if (props.auth.isAuthenticated) {\r\n        authUser();\r\n        return <Redirect to=\"/\"/>\r\n    }\r\n\r\n    return (\r\n        <div className=\"formBox\">\r\n            <h3>Registrer deg</h3>\r\n            <form className=\"form\" onSubmit={handleSubmit(onSubmit)}>\r\n                <input placeholder=\"Fornavn\" {...register(\"firstName\", { required: \"Fornavn påkrevd\", pattern: {value: /^[ÆØÅA-Z]+[æøåa-z]$/i, message: \"Oppfyller ikke krav\"} })} />\r\n                <div className=\"formErrorField\">\r\n                    <ErrorMessage errors={errors} name=\"firstName\" render={({ message }) => <p>{message}</p>}/>\r\n                </div>\r\n                <input placeholder=\"Etternavn\" {...register(\"lastName\", { required: \"Etternavn påkrevd\", pattern: {value: /^[ÆØÅA-Zæøåa-z]+$/i, message: \"Oppfyller ikke krav\" }})} />\r\n                <div className=\"formErrorField\">\r\n                    <ErrorMessage errors={errors} name=\"lastName\" render={({ message }) => <p>{message}</p>}/>\r\n                </div>\r\n                <input placeholder=\"E-mail\" {...register(\"email\", {required: \"E-postadresse påkrevd\", pattern: {value: /^[\\w-\\.]+@([\\w-]+\\.)+[\\w-]{2,4}$/i, message: \"Oppfyller ikke krav\"}})}/>\r\n                <div className=\"formErrorField\">\r\n                    <ErrorMessage errors={errors} name=\"email\" render={({ message }) => <p>{message}</p>}/>\r\n                </div>\r\n                <input type=\"password\" placeholder=\"Passord\" {...register(\"password\", {required: \"Passord må være minst 8 tegn langt\", minLength: {value: 8, message: \"Passord må være minst 8 tegn langt\"} })} />\r\n                <div className=\"formErrorField\">\r\n                    <ErrorMessage errors={errors} name=\"password\" render={({ message }) => <p>{message}</p>}/>\r\n                </div>\r\n                <input type=\"password\" placeholder=\"Gjenta passord\" {...register(\"cpassword\", {required: \"Passordene må være like\", validate: { passEqual: val => (val === getValues().password) ||  \"Passordene må være like\"}})} />\r\n                <div className=\"formErrorField\">\r\n                    <ErrorMessage errors={errors} name=\"cpassword\" render={({ message }) => <p>{message}</p>}/>\r\n                </div>\r\n                <button className=\"button\" type=\"submit\"> REGISTRER </button>\r\n                <div className=\"column\">\r\n                    <Link to=\"/login\" >\r\n                        <h5>Allerede bruker? Logg inn her!</h5>\r\n                    </Link>\r\n                </div>\r\n            </form>\r\n        </div>\r\n    );\r\n\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        auth: state.auth\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(RegistrationPage);"]},"metadata":{},"sourceType":"module"}