{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/Svenn\\xE6rn/Desktop/laddel-mvp/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"C:/Users/Svenn\\xE6rn/Desktop/laddel-mvp/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\Svenn\\xE6rn\\\\Desktop\\\\laddel-mvp\\\\frontend\\\\src\\\\pages\\\\ChargerMapPage.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useRef, useState } from \"react\";\nimport { fetchChargers } from \"../services/charger/fetchChargersService\";\nimport history from \"../history\";\nimport { connect, useDispatch } from \"react-redux\";\nimport { getSession } from \"../actions/sessionActions\";\nimport Map from \"../components/Map\";\nimport ErrorBox from \"../components/ErrorBox\";\nimport '../stylesheets/ChargersPage.css';\nimport { get } from \"react-hook-form\";\nimport { getAllChargers } from \"../actions/mapActions\";\n/**\r\n *\r\n * Komponenten er siden med Map-komponent.\r\n * @component\r\n * @author Magnus\r\n */\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar ChargerMapPage = function ChargerMapPage(props) {\n  _s();\n\n  var session = props.session;\n  var mapError = props.map.fetchError;\n  var sessionError = props.session.fetchError;\n  var chargers = props.map.chargers;\n  var dispatch = useDispatch();\n\n  var onLoad = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return dispatch(getAllChargers());\n\n            case 2:\n              _context.next = 4;\n              return dispatch(getSession());\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function onLoad() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  useEffect(function () {\n    var isMounted = true;\n    onLoad();\n    return function () {\n      isMounted = false;\n    };\n  }, []);\n\n  var handleClick = function handleClick() {\n    history.push(\"/charger/\".concat(session.session.chargerID));\n  };\n\n  var refresh = function refresh() {\n    onLoad();\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"scopeContent\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"box\",\n      children: [/*#__PURE__*/_jsxDEV(Map, {\n        chargers: chargers\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 17\n      }, _this), sessionError || mapError ? /*#__PURE__*/_jsxDEV(ErrorBox, {\n        error: \"Nettverksfeil. Trykk p\\xE5 knappen for \\xE5 laste inn p\\xE5 nytt.\",\n        handleClick: refresh\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 21\n      }, _this) : null, session.session ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mapNavBar\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"activeChargerButton\",\n          onClick: handleClick,\n          children: /*#__PURE__*/_jsxDEV(\"h4\", {\n            children: \"Lader...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 60,\n            columnNumber: 29\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 25\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 21\n      }, _this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"column\",\n        children: \"Velg en ledig lader p\\xE5 kartet\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 29\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 13\n    }, _this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 52,\n    columnNumber: 9\n  }, _this);\n};\n\n_s(ChargerMapPage, \"rAh3tY+Iv6hWC9AI4Dm+rCbkwNE=\", false, function () {\n  return [useDispatch];\n});\n\n_c = ChargerMapPage;\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    session: state.session,\n    map: state.map\n  };\n};\n\nexport default connect(mapStateToProps)(ChargerMapPage);\n\nvar _c;\n\n$RefreshReg$(_c, \"ChargerMapPage\");","map":{"version":3,"sources":["C:/Users/Svennærn/Desktop/laddel-mvp/frontend/src/pages/ChargerMapPage.js"],"names":["React","useEffect","useRef","useState","fetchChargers","history","connect","useDispatch","getSession","Map","ErrorBox","get","getAllChargers","ChargerMapPage","props","session","mapError","map","fetchError","sessionError","chargers","dispatch","onLoad","isMounted","handleClick","push","chargerID","refresh","mapStateToProps","state"],"mappings":"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","sourcesContent":["import React, {useEffect, useRef, useState} from \"react\";\r\n\r\nimport { fetchChargers } from \"../services/charger/fetchChargersService\";\r\nimport history from \"../history\";\r\nimport {connect, useDispatch} from \"react-redux\";\r\nimport {getSession} from \"../actions/sessionActions\";\r\n\r\nimport Map from \"../components/Map\";\r\nimport ErrorBox from \"../components/ErrorBox\";\r\nimport '../stylesheets/ChargersPage.css';\r\nimport {get} from \"react-hook-form\";\r\nimport {getAllChargers} from \"../actions/mapActions\";\r\n\r\n/**\r\n *\r\n * Komponenten er siden med Map-komponent.\r\n * @component\r\n * @author Magnus\r\n */\r\n\r\nconst ChargerMapPage = (props) => {\r\n\r\n    const session = props.session;\r\n    const mapError = props.map.fetchError;\r\n    const sessionError = props.session.fetchError;\r\n    const chargers = props.map.chargers;\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    const onLoad = async () => {\r\n        await dispatch(getAllChargers());\r\n        await dispatch(getSession());\r\n    }\r\n\r\n    useEffect(() => {\r\n        let isMounted = true;\r\n        onLoad();\r\n        return () => {\r\n            isMounted = false;\r\n        }\r\n    }, []);\r\n\r\n    const handleClick = () => {\r\n        history.push(`/charger/${session.session.chargerID}`);\r\n    }\r\n\r\n    const refresh = () => {\r\n        onLoad();\r\n    }\r\n\r\n    return (\r\n        <div className=\"scopeContent\">\r\n            <div className=\"box\">\r\n                <Map chargers={chargers}/>\r\n                {sessionError || mapError ?\r\n                    <ErrorBox error=\"Nettverksfeil. Trykk på knappen for å laste inn på nytt.\" handleClick={refresh}/> : null}\r\n                {session.session ?\r\n                    <div className=\"mapNavBar\">\r\n                        <button className=\"activeChargerButton\" onClick={handleClick}>\r\n                            <h4>Lader...</h4>\r\n                        </button>\r\n                    </div>: <div className=\"column\">Velg en ledig lader på kartet</div> }\r\n            </div>\r\n        </div>\r\n\r\n    );\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        session: state.session,\r\n        map: state.map\r\n    }\r\n}\r\n\r\nexport default (connect)(mapStateToProps)(ChargerMapPage);"]},"metadata":{},"sourceType":"module"}