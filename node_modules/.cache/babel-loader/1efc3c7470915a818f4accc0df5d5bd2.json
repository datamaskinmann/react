{"ast":null,"code":"import _slicedToArray from \"C:/Users/Svenn\\xE6rn/Desktop/laddel-mvp/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\Svenn\\xE6rn\\\\Desktop\\\\laddel-mvp\\\\frontend\\\\src\\\\components\\\\Charger.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport '../stylesheets/Charger.css';\nimport ChargerButton from '../components/ChargerButton';\nimport TimeSelector from '../components/TimeSelector';\nimport { StartCharger } from \"../services/charger/startChargingService\";\nimport { StopCharger } from \"../services/charger/stopChargingService\";\nimport { invokePoll, pollNew } from \"../services/charger/chargingStatePollingService\";\n/**\r\n *\r\n * @author Magnus & Sven\r\n * Komponent som representerer lader og muliggjør interaksjon med den.\r\n *\r\n * @component\r\n */\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar Charger = function Charger(props) {\n  _s();\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      getTime = _useState2[0],\n      setGetTime = _useState2[1];\n\n  var _useState3 = useState(new Date()),\n      _useState4 = _slicedToArray(_useState3, 2),\n      time = _useState4[0],\n      _setTime = _useState4[1];\n\n  var _useState5 = useState(0),\n      _useState6 = _slicedToArray(_useState5, 2),\n      chargingState = _useState6[0],\n      setChargingState = _useState6[1];\n\n  useEffect(function () {\n    var isMounted = true;\n    if (isMounted) pollNew(props.chargerId, function (e) {\n      return setChargingState(e);\n    });\n    return function () {\n      isMounted = false;\n    };\n  }, []);\n  useEffect(function () {\n    switch (chargingState) {}\n  }, [chargingState]);\n  /**\r\n   * Håndterer klikk fra ChargerButton\r\n   *  - Sjekker state på lader\r\n   *  - Starter dersom chargingState er 2\r\n   *  - Stopper dersom chargingState er 3\r\n   *\r\n   * @returns {void}\r\n   * @memberOf Charger\r\n   */\n\n  var handleClick = function handleClick() {\n    switch (chargingState) {\n      case 2:\n        setGetTime(true);\n        StartCharger(props.chargerId).then(function () {\n          //sende Time med request for å reservere til {time}\n          invokePoll();\n        });\n        setGetTime(false);\n        break;\n\n      case 3:\n        StopCharger(props.chargerId).then(function () {\n          invokePoll();\n        });\n        break;\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"box\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"boxContent\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"laddelGreen\",\n        children: [\" \", props.name, \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 17\n      }, _this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"laddelGreen\",\n        children: [\" \", props.owner, \"s lader\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 17\n      }, _this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Reserver til\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 17\n      }, _this), /*#__PURE__*/_jsxDEV(TimeSelector, {\n        now: new Date(),\n        interval: 4,\n        getTime: getTime,\n        setTime: function setTime() {\n          return _setTime(time);\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 17\n      }, _this), /*#__PURE__*/_jsxDEV(ChargerButton, {\n        onClick: handleClick,\n        chargingState: chargingState\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 17\n      }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"filler\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 17\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 13\n    }, _this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 71,\n    columnNumber: 9\n  }, _this);\n};\n\n_s(Charger, \"sBHa65dtQpl3OhvsGjxwKNulokQ=\");\n\n_c = Charger;\nexport default Charger;\n\nvar _c;\n\n$RefreshReg$(_c, \"Charger\");","map":{"version":3,"sources":["C:/Users/Svennærn/Desktop/laddel-mvp/frontend/src/components/Charger.js"],"names":["React","useEffect","useState","ChargerButton","TimeSelector","StartCharger","StopCharger","invokePoll","pollNew","Charger","props","getTime","setGetTime","Date","time","setTime","chargingState","setChargingState","isMounted","chargerId","e","handleClick","then","name","owner"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from 'react';\r\n\r\nimport '../stylesheets/Charger.css'\r\nimport ChargerButton from '../components/ChargerButton';\r\nimport TimeSelector from '../components/TimeSelector';\r\n\r\nimport {StartCharger} from \"../services/charger/startChargingService\";\r\nimport {StopCharger} from \"../services/charger/stopChargingService\";\r\nimport { invokePoll, pollNew } from \"../services/charger/chargingStatePollingService\";\r\n\r\n/**\r\n *\r\n * @author Magnus & Sven\r\n * Komponent som representerer lader og muliggjør interaksjon med den.\r\n *\r\n * @component\r\n */\r\n\r\nconst Charger = (props) => {\r\n\r\n    const [getTime, setGetTime] = useState(false);\r\n    const [time, setTime] = useState(new Date());\r\n\r\n    const [chargingState, setChargingState] = useState(0);\r\n\r\n    useEffect(() => {\r\n\r\n        let isMounted = true;\r\n        if(isMounted)\r\n        pollNew(props.chargerId, (e) => setChargingState(e));\r\n\r\n        return () => {\r\n            isMounted = false;\r\n        }\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        switch (chargingState) {\r\n\r\n        }\r\n    }, [chargingState]);\r\n\r\n    /**\r\n     * Håndterer klikk fra ChargerButton\r\n     *  - Sjekker state på lader\r\n     *  - Starter dersom chargingState er 2\r\n     *  - Stopper dersom chargingState er 3\r\n     *\r\n     * @returns {void}\r\n     * @memberOf Charger\r\n     */\r\n\r\n    const handleClick = () => {\r\n        switch (chargingState) {\r\n            case 2:\r\n                setGetTime(true);\r\n                StartCharger(props.chargerId).then(() => { //sende Time med request for å reservere til {time}\r\n                    invokePoll();\r\n                });\r\n                setGetTime(false);\r\n                break;\r\n            case 3:\r\n                StopCharger(props.chargerId).then(() => {\r\n                    invokePoll();\r\n                })\r\n                break;\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"box\">\r\n            <div className=\"boxContent\">\r\n                <h2 className=\"laddelGreen\"> {props.name} </h2>\r\n                <h3 className=\"laddelGreen\"> {props.owner}s lader</h3>\r\n\r\n                <h3>Reserver til</h3>\r\n                <TimeSelector now={new Date()} interval={4}\r\n                              getTime={getTime}\r\n                              setTime={() => setTime(time)}/>\r\n\r\n                <ChargerButton onClick={handleClick}\r\n                               chargingState={chargingState}/>\r\n                <div className=\"filler\"></div>\r\n            </div>\r\n\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Charger"]},"metadata":{},"sourceType":"module"}