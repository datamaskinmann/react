{"ast":null,"code":"import _objectSpread from \"C:/Users/Svenn\\xE6rn/Desktop/laddel-mvp/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport { ACTION_TYPES } from \"../actions/userActions\";\nvar initState = {\n  token: JSON.parse(localStorage.getItem(\"token\")),\n  isAuthenticated: false,\n  isLoading: false,\n  loaded: false,\n  user: null,\n  loginError: null,\n  registerError: null,\n  authError: null\n};\n/**\r\n * Metode for å endre states knyttet til bruker.\r\n * Sjekker typen handling og endrer state etterfølgende.\r\n * @param state - state\r\n * @param action - JavaScript-objekt med type handling og evt data\r\n * @return state - ny state\r\n * @author Magnus\r\n */\n\nvar userReducer = function userReducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initState;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n  var payload = action.payload;\n\n  switch (action.type) {\n    case ACTION_TYPES.LOGIN_USER:\n      console.log('attempting login', payload.email);\n      return _objectSpread(_objectSpread({}, state), {}, {\n        isLoading: true,\n        loaded: false,\n        loginError: null\n      });\n\n    case ACTION_TYPES.LOGIN_SUCCESS:\n      console.log(\"success\");\n      var token = JSON.parse(localStorage.getItem(\"token\"));\n      console.log(token);\n      return _objectSpread(_objectSpread({}, state), {}, {\n        token: token,\n        user: payload.user,\n        isLoading: false,\n        loaded: true,\n        loginError: null\n      });\n\n    case ACTION_TYPES.LOGIN_FAILURE:\n      if (payload.response) {\n        console.log(\"ja\");\n        return _objectSpread(_objectSpread({}, state), {}, {\n          token: null,\n          isLoading: false,\n          loaded: true,\n          loginError: payload\n        });\n      } else if (payload.request) {\n        return _objectSpread(_objectSpread({}, state), {}, {\n          isLoading: false,\n          loaded: true,\n          loginError: payload\n        });\n      } else {\n        return _objectSpread(_objectSpread({}, state), {}, {\n          isLoading: false,\n          loaded: true,\n          loginError: payload\n        });\n      }\n\n    case ACTION_TYPES.REGISTER_USER:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        isLoading: true,\n        loaded: false,\n        registerError: null\n      });\n\n    case ACTION_TYPES.REGISTER_SUCCESS:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        isLoading: false,\n        loaded: true,\n        registerError: null\n      });\n\n    case ACTION_TYPES.REGISTER_FAILURE:\n      if (payload.response) {\n        console.log(\"ja\");\n        return _objectSpread(_objectSpread({}, state), {}, {\n          isLoading: false,\n          loaded: true,\n          registerError: payload\n        });\n      } else if (payload.request) {\n        return _objectSpread(_objectSpread({}, state), {}, {\n          isLoading: false,\n          loaded: true,\n          registerError: payload\n        });\n      } else {\n        return _objectSpread(_objectSpread({}, state), {}, {\n          isLoading: false,\n          loaded: true,\n          registerError: payload\n        });\n      }\n\n    case ACTION_TYPES.AUTH_USER:\n      console.log(\"authenticating...\");\n      return _objectSpread(_objectSpread({}, state), {}, {\n        isLoading: true,\n        loaded: false,\n        authError: null\n      });\n\n    case ACTION_TYPES.AUTH_SUCCESS:\n      console.log(\"authenticated!\");\n      return _objectSpread(_objectSpread({}, state), {}, {\n        isAuthenticated: true,\n        isLoading: false,\n        loaded: true,\n        authError: null\n      });\n\n    case ACTION_TYPES.AUTH_FAILURE:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        isAuthenticated: false,\n        isLoading: false,\n        loaded: true,\n        authError: payload\n      });\n\n    case ACTION_TYPES.LOGOUT_USER:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        isAuthenticated: false,\n        token: null,\n        user: null\n      });\n\n    default:\n      return state;\n  }\n};\n\nexport default userReducer;","map":{"version":3,"sources":["C:/Users/Svennærn/Desktop/laddel-mvp/frontend/src/reducers/userReducer.js"],"names":["ACTION_TYPES","initState","token","JSON","parse","localStorage","getItem","isAuthenticated","isLoading","loaded","user","loginError","registerError","authError","userReducer","state","action","payload","type","LOGIN_USER","console","log","email","LOGIN_SUCCESS","LOGIN_FAILURE","response","request","REGISTER_USER","REGISTER_SUCCESS","REGISTER_FAILURE","AUTH_USER","AUTH_SUCCESS","AUTH_FAILURE","LOGOUT_USER"],"mappings":"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","sourcesContent":["import {ACTION_TYPES} from \"../actions/userActions\";\r\n\r\nconst initState = {\r\n    token: JSON.parse(localStorage.getItem(\"token\")),\r\n    isAuthenticated: false,\r\n    isLoading: false,\r\n    loaded: false,\r\n    user: null,\r\n    loginError: null,\r\n    registerError: null,\r\n    authError: null\r\n};\r\n\r\n/**\r\n * Metode for å endre states knyttet til bruker.\r\n * Sjekker typen handling og endrer state etterfølgende.\r\n * @param state - state\r\n * @param action - JavaScript-objekt med type handling og evt data\r\n * @return state - ny state\r\n * @author Magnus\r\n */\r\n\r\nconst userReducer = (state = initState, action) => {\r\n    const payload = action.payload;\r\n    switch (action.type) {\r\n        case ACTION_TYPES.LOGIN_USER:\r\n            console.log('attempting login', payload.email);\r\n            return {\r\n                ...state,\r\n                isLoading: true,\r\n                loaded: false,\r\n                loginError: null\r\n            }\r\n        case ACTION_TYPES.LOGIN_SUCCESS:\r\n            console.log(\"success\")\r\n            const token = JSON.parse(localStorage.getItem(\"token\"));\r\n            console.log(token)\r\n            return {\r\n                ...state,\r\n                token: token,\r\n                user: payload.user,\r\n                isLoading: false,\r\n                loaded: true,\r\n                loginError: null\r\n            }\r\n        case ACTION_TYPES.LOGIN_FAILURE:\r\n            if (payload.response) {\r\n                console.log(\"ja\")\r\n                return {\r\n                    ...state,\r\n                    token: null,\r\n                    isLoading: false,\r\n                    loaded: true,\r\n                    loginError: payload\r\n                }\r\n            } else if (payload.request) {\r\n                return {\r\n                    ...state,\r\n                    isLoading: false,\r\n                    loaded: true,\r\n                    loginError: payload\r\n                }\r\n            }\r\n            else {\r\n                return {\r\n                    ...state,\r\n                    isLoading: false,\r\n                    loaded: true,\r\n                    loginError: payload\r\n                }\r\n            }\r\n        case ACTION_TYPES.REGISTER_USER:\r\n            return {\r\n                ...state,\r\n                isLoading: true,\r\n                loaded: false,\r\n                registerError: null\r\n            }\r\n        case ACTION_TYPES.REGISTER_SUCCESS:\r\n            return {\r\n                ...state,\r\n                isLoading: false,\r\n                loaded: true,\r\n                registerError: null\r\n            }\r\n        case ACTION_TYPES.REGISTER_FAILURE:\r\n            if (payload.response) {\r\n                console.log(\"ja\")\r\n                return {\r\n                    ...state,\r\n                    isLoading: false,\r\n                    loaded: true,\r\n                    registerError: payload\r\n                }\r\n            } else if (payload.request) {\r\n                return {\r\n                    ...state,\r\n                    isLoading: false,\r\n                    loaded: true,\r\n                    registerError: payload\r\n                }\r\n            } else {\r\n                return {\r\n                    ...state,\r\n                    isLoading: false,\r\n                    loaded: true,\r\n                    registerError: payload\r\n                }\r\n            }\r\n        case ACTION_TYPES.AUTH_USER:\r\n            console.log(\"authenticating...\")\r\n            return {\r\n                ...state,\r\n                isLoading: true,\r\n                loaded: false,\r\n                authError: null\r\n            }\r\n        case ACTION_TYPES.AUTH_SUCCESS:\r\n            console.log(\"authenticated!\")\r\n            return {\r\n                ...state,\r\n                isAuthenticated: true,\r\n                isLoading: false,\r\n                loaded: true,\r\n                authError: null\r\n            }\r\n        case ACTION_TYPES.AUTH_FAILURE:\r\n            return {\r\n                ...state,\r\n                isAuthenticated: false,\r\n                isLoading: false,\r\n                loaded: true,\r\n                authError: payload\r\n            }\r\n        case ACTION_TYPES.LOGOUT_USER:\r\n            return {\r\n                ...state,\r\n                isAuthenticated: false,\r\n                token: null,\r\n                user: null\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default userReducer;"]},"metadata":{},"sourceType":"module"}